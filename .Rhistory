View(df)
df[1,]
df[2,]
?is.blank
df <- read.csv(file = file, header = T, colClasses = "character")
which(df == "")
apply(df, 1, which(x == "")
apply(df, 1, which(x == "")
)
apply(df, 1, which(x == ""))
apply(df, 1, function(x) which(x == ""))
apply(df, 1, function(x) sum(which(x == "")))
View(df)
df[1, ]
which(df[1, ] == "")
length(which(df[1, ] == ""))
length(which(df[1, ] 1= ""))
length(which(df[1, ] != ""))
length(which(df[1, ] != "")) - 1
apply(df, 1, length(which(x != "")) - 1)
apply(df, 1, function(x) length(which(x != "")) - 1)
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, total
)
View(df.1)
df.1 <- dplyr::arrange(df, -total)
View(df)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character")
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, -total)
View(df.1)
View(df)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character")
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, -total)
View(df.1)
View(df)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character")
#fix New Hampshire??
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, -total)
View(df)
View(df.1)
df <- read.csv(file = file, header = T, colClasses = "character", white.space = F)
?read.table
df <- read.csv(file = file, header = T, colClasses = "character", strip.white = F)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character", strip.white = F)
#fix New Hampshire??
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, -total)
df <- apply(df, 2, stringr::str_trim)
View(df)
df <- data.frame(apply(df, 2, stringr::str_trim))
df <- data.frame(apply(df, 2, stringr::str_trim), stringsAsFactors = F)
df$total <- apply(df, 1, function(x) length(which(x != "")) - 1)
df.1 <- dplyr::arrange(df, -total)
View(df.1)
list.files(path = "./data")
list.files(path = "./data", full.names = T)
df.2 <- read.csv(file = file, header = T, stringsAsFactors = F)
View(df.2)
file <-  "./data/mercatus_state_rankings.csv"
df.2 <- read.csv(file = file, header = T, stringsAsFactors = F)
View(df.2)
colnames(df.1)[1]
colnames(df.1)[1] <- "state"
#merge
df.3 <- merge(df.1, df.2)
View(df.3)
?merge
#merge
df.3 <- merge(df.1, df.2, all = T)
View(df.3)
#merge
df.3 <- merge(df.1, df.2)
setdiff(df.2$state, df.3$state)
df.1$state
sort(df.1$state)
df.2$state
df.2 <- stringr::str_trim(df.2$state)
#merge
df.3 <- merge(df.1, df.2)
setdiff(df.2$state, df.3$state)
file <-  "./data/mercatus_state_rankings.csv"
df.2 <- read.csv(file = file, header = T, stringsAsFactors = F)
df.2$state <- stringr::str_trim(df.2$state)
#merge
df.3 <- merge(df.1, df.2)
setdiff(df.2$state, df.3$state)
library(ggplot2)
df.3 <- dplyr::arrange(df.3, mercatus.fiscal_idx)
df.3 <- dplyr::arrange(df.3, df.3$mercatus.fiscal.idx)
View(df.3)
df.3 <- dplyr::arrange(df.3, -df.3$mercatus.fiscal.idx)
df.3$rank <- 1:nrow(df.3)
#merge
df.3 <- merge(df.1, df.2)
df.3 <- dplyr::arrange(df.3, -df.3$mercatus.fiscal.idx)
df.3$fiscal.rank <- 1:nrow(df.3)
library(ggplot2)
states
state
state.abb
length(state.abb)
#merge
df.3 <- merge(df.1, df.2)
df.3 <- dplyr::arrange(df.3, state)
df.3$state.abb <- state.abb
View(df.3)
df.3 <- dplyr::arrange(df.3, -mercatus.fiscal.idx)
#merge
df.3 <- merge(df.1, df.2)
df.3 <- dplyr::arrange(df.3, -mercatus.fiscal.idx)
df.3$fiscal.rank <- 1:nrow(df.3)
library(ggplot2)
p <- ggplot(df.3, aes(mercatus.fiscal.idx))
p <- ggplot(df.3, aes(mercatus.fiscal.idx))
p <- geom_boxplot()
p
p <- ggplot(df.3, aes(mercatus.fiscal.idx))
p <- p + geom_boxplot()
p
p <- ggplot(df.3, aes(mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p
p <- ggplot(df.3, aes(mercatus.fiscal.idx))
p <- p + geom_boxplot(group = total)
p <- p + geom_boxplot(data = df.3, group = total)
p <- p + geom_boxplot(group = df.3$total)
p
p <- ggplot(df.3, aes(group = total, mercatus.fiscal.idx))
p <- p + geom_boxplot()
p
p <- ggplot(df.3, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p
table(df.3$total)
View(df.1)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character", strip.white = F)
df <- data.frame(apply(df, 2, stringr::str_trim), stringsAsFactors = F)
df$total <- apply(df, 1, function(x) length(which(x != "") - 1)
df$total <- apply(df, 1, function(x) length(which(x != "") - 1))
View(df)
df$total <- apply(df, 1, function(x) length(which(x != ""))- 1)
View(df)
file <- "./data/tabula-2015-11-24_cbpp_better_cost_estimates_table1.csv"
df <- read.csv(file = file, header = T, colClasses = "character", strip.white = F)
df <- data.frame(apply(df, 2, stringr::str_trim), stringsAsFactors = F)
df$total <- apply(df, 1, function(x) length(which(x != "")))
df$total <- df$total - 1
View(df)
df.1 <- dplyr::arrange(df, -total)
colnames(df.1)[1] <- "state"
file <-  "./data/mercatus_state_rankings.csv"
df.2 <- read.csv(file = file, header = T, stringsAsFactors = F)
df.2$state <- stringr::str_trim(df.2$state)
#merge
df.3 <- merge(df.1, df.2)
df.3 <- dplyr::arrange(df.3, -mercatus.fiscal.idx)
df.3$fiscal.rank <- 1:nrow(df.3)
library(ggplot2)
p <- ggplot(df.3, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p
plot(df.3$total, df.3$mercatus.fiscal.idx)
fit.lm <- lm(mercatus.fiscal.idx ~ total, data = df.3)
summary(fit.lm)
p <- ggplot(df.3, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_smooth()
p
p <- ggplot(df.3, aes(total, mercatus.fiscal.idx))
p <- p + geom_point()
p <- p + geom_smooth()
p
#add state abbreviations
df.state <- data.frame(state = state)
#add state abbreviations
df.state <- data.frame(state.abb)
#add state abbreviations
df.state <- data.frame(state.abb = state.abb)
#add state abbreviations
df.state <- data.frame(state = state.name, state.abb = state.abb)
View(df.state)
df.4 <- merge(df.3, df.4)
df.4 <- merge(df.3, df.state)
fit.lm <- lm(mercatus.fiscal.idx ~ total, data = df.4)
summary(fit.lm)
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_point()
p <- p + geom_smooth()
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(aes(df.4$state.abb))
p <- p + geom_smooth()
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text()
p <- p + geom_smooth()
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb)
p <- p + geom_smooth()
p
fit.lm <- lm(mercatus.fiscal.idx ~ ., data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~ published.on.the.web, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~ Prepared.for.all.most.bills, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency
, data = df.4)
summary(fit.lm)
names(df.4)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency +
budget.impacts.for...1.year
, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency +
budget.impacts.for...1.year +
budget.impacts...4.years
, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency +
budget.impacts.for...1.year +
budget.impacts...4.years +
revisions.during.bill.process
, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency +
budget.impacts.for...1.year +
budget.impacts...4.years +
revisions.during.bill.process +
published.on.the.web
, data = df.4)
summary(fit.lm)
fit.lm <- lm(mercatus.fiscal.idx ~
Prepared.for.all.most.bills +
Prepared.by.non.partisan.agency +
budget.impacts.for...1.year +
budget.impacts...4.years +
revisions.during.bill.process +
published.on.the.web, data = df.4)
summary(fit.lm)
fit.lm.2 <- lm(mercatus.fiscal.idx ~ total, data = df.4)
summary(fit.lm.2)
fit.lm.2 <- glm(mercatus.fiscal.idx ~ total, data = df.4)
summary(fit.lm.2)
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb)
p <- p + geom_smooth()
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb)
p <- p + geom_smooth(method = "lm")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 1)
p <- p + geom_smooth(method = "lm")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "lm")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p
p <- ggtitle("50 States Comparison \n
fiscal note reqmt. vs. state fiscal ranking")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p <- p + ggtitle("50 States Comparison \n
fiscal note reqmt. vs. state fiscal ranking")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p <- p + ggtitle("50 States Comparison
fiscal note reqmt. vs. state fiscal ranking")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p <- p + ggtitle("50 States Comparison
fiscal note reqmt. vs. state fiscal ranking")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p <- p + ggtitle("50 States Comparison")
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx))
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + geom_smooth(method = "loess")
p <- p + scale_x_continuous(name = "fiscal.note.totals")
p <- p + ggtitle("50 States Comparison")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
?ggsave
filename <- "./plots/50_state_comparison_fiscal_health_versus_fiscal_note_use.pdf"
ggsave(filename = filename, height = 4, width = 6, unit = "in")
dir.create("./plots")
filename <- "./plots/50_state_comparison_fiscal_health_versus_fiscal_note_use.pdf"
ggsave(filename = filename, height = 4, width = 6, unit = "in")
filename <- "./plots/50_state_comparison_fiscal_health_versus_fiscal_note_use.jpg"
ggsave(filename = filename, height = 4, width = 6, unit = "in")
#boxplot
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx group = total))
p <- p + geom_boxplot()
p
#boxplot
p <- ggplot(df.4, aes(mercatus.fiscal.idx group = total))
p <- p + geom_boxplot()
p
#boxplot
p <- ggplot(df.4, aes(mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p
#boxplot
p <- ggplot(df.4, aes(mercatus.fiscal.idx, total, group = total))
p <- p + geom_boxplot()
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_smooth(method = "loess")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_smooth(data = df.4, aes(total, mercatus.fiscal.idx)method = "loess")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_smooth(data = df.4, aes(total, mercatus.fiscal.idx), method = "loess")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + scale_x_continuous(name = "fiscal")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_text(label = df.4$state.abb, size = 2)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_point(color = total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_point(color = df.4$total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_jitter()
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total, colour = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_continuous(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total, colour = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes( total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot(color = df.4$total)
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p
#boxplot
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p <- p + ggtitle("50 States Comparison")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
#boxplot
df.4$total <- as.factor(df.4$total)
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx, group = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p <- p + ggtitle("50 States Comparison")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx, group = total, colour = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p <- p + ggtitle("50 States Comparison")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
#boxplot
df.4$total <- as.factor(df.4$total)
p <- ggplot(df.4, aes(total, mercatus.fiscal.idx, group = total, colour = total))
p <- p + geom_boxplot()
p <- p + geom_jitter(width = 0)
#p <- p + geom_point(color = df.4$total)
p <- p + scale_x_discrete(name = "fiscal.note.total")
p <- p + ggtitle("50 States Comparison")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p <- p + theme(legend.position="none")
p
filename <- "./plots/50_state_comparison_boxplot.jpg"
ggsave(filename = filename, height = 4, width = 6, unit = "in")
#write data
file <- "./data/mercatus_cbpp_combined_table.csv"
View(df.4)
#write data
df.5 <- dplyr::select(df.4,
fiscal.rank,
state,
state.abb,
Prepared.for.all.most.bills:mercatus.fiscal.idx)
View(df.5)
df.5 <- dplyr::arrange(df.5, -total)
View(df.5)
?as.factor
df.5$total <- as.integer(levels(df.5$total))[df.5$total]
df.5 <- dplyr::arrange(df.5, -total)
#write data
df.5 <- dplyr::select(df.4,
fiscal.rank,
state,
state.abb,
Prepared.for.all.most.bills:mercatus.fiscal.idx)
df.5$total <- as.integer(levels(df.5$total))[df.5$total]
df.5 <- dplyr::arrange(df.5, -total)
file <- "./data/mercatus_cbpp_combined_table.csv"
write.csv(df.5, file = file, row.names = F)
View(df.5)
df.5 <- dplyr::arrange(df.5, fiscal.rank)
View(df.5)
